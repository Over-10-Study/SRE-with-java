# Chapter 1. 애플리케이션 플랫폼

## 결론

플랫폼 엔지니어링 팀에게 개발팀은 통제의 대상이 아닌 최우선 고객이고, 고객의 입장에서 고객의 요구에 집중할 때 최대의 효과를 발휘한다. 테스트 도구, 채택 과정, 그 외 모든 프로세스가 `관문이 아닌 가드레일`이 되어야 한다.

마이크로서비스는 애플리케이션을 독립적으로 배포 가능한 서비스군으로 설계하는 특정한 방식이다. 마이크로서비스는 데이터 전송과 통신량으로 추가 비용과 레이턴시가 발생하며 잠재적으로 사용자 경험을 저하시킨다. 이렇게 분산된 시스템을 관리하려면 새로운 관행, 도구, 엔지니어링 문화가 필요하다.

## 플랫폼 엔지니어링 문화

### 구글 vs. 넷플리스

구글의 프로덕트들은 서로 매우 이질적이다. 넷플릭스의 프로덕트는 특정 플랫폼에서 실행되는 일련의 비지니스 애플리케이션으로 구성되며 소수의 언어로 개발된다.

우리의 조직은 어느 쪽을 더 닮았는가? 아마 우형은 넷플릭스, 우리 회사는 구글인가?

### 자유와 책임 (넷플릭스의 조직문화)

- https://www.slideshare.net/reed2001/culture-1798664
- 번역본 - https://www.slideshare.net/watchncompass/freedom-responsibility-culture

책임감 있는 사람은 자유 속에서 성장하고, 자유를 누릴 가치가 있다.

성장을 통한 혼란을 피하면서도, 퍼포먼스가 더 높은 사람들을 통제하지 않고 성장하기.

1. 돌이킬 수 없는 재앙은 예방하라
2. 도덕적, 윤리적, 법적인 문제들

대개 빠른 회복 모델이 바른 모델이다. 우리는 제약이나 원자력 같이 안전이 극히 중요한 곳이 아니라, 창의적이고 혁신적인 곳에 있다.

좋은 절차는 사람들이 더 많은 것을 할 수 있게 돕는다. 나쁜 절차는 만회 가능한 실수까지 방지하려 한다.

빌드 도구 팀이 `관문이 아닌 가드레일`이 되려면 프로덕션 팀의 시각에 맞춰 문제를 바라봐야한다.

## 모니터링

SLI - Service Level Indicator(서비스 수준 척도)

SLO - Service Level Objective(서비스 수준 목표)

SLA - Service Level Agreement(서비스 수준 협약)

### 디버깅 도구 역할

APM

### 실패 예측과 수용

시스템이 완벽해질 수 없다는 현실을 인식하면 시스템을 바라보는 관점이, 완벽성 추구에서 모니터링, 경보, 신속한 문제 처리로 옮겨간다.

최종 사용자 역시 완벽한 서비스를 기대하기보다 원활한 문제 해결을 더 선호하는 경향이 있다.

사용자 중심 모니터링 문화는 양방향 소통관계를 수립한다.

## 전달

소프트웨어 delivery pipeline을 개선하면 delivery 프로세스가 기존 시스템에 장애를 일으킬 가능성을 줄일 수 있다. 문제 발생 시 빠르게 롤백할 수도 있다.

CI/CD 의 경계는 종종 흐릿해지는데, 보통 CI 빌드과정에서 배포 스크립트를 실행하기 때문이다. 그래서 이를 명확하게 구분지을 필요는 없다. 자동화가 실행되는 위치에 상관없이 둘을 개념적으로 명확히 구분지을 필요가 있다.

CI의 목표는 개발자 피드백 강화, 테스트 자동화(신속한 검증), 무분별한 통합 방지를 위한 적극적 병합 장려(?)

CD의 목표는 릴리즈 주기 단축, 보안 규정 준수, 안전하고 유연한 배포 관행 확립

## 테스트

테스트 커버리지 100%, 발전된 모니터링 시스템..

프로덕션은 테스트 환경과 다르게 어긋날 수 있다. 프로덕션과 동일한 환경은 존재하지 않는다. 그렇다고 테스트가 덜 중요하다는 의미는 아니다.

테스트 계층을 중첩시킬수록 장애 발생률은 낮아지지만, 완전히 없앨 수는 없다.

테스트와 모니터링은 사용자 경험을 장애로부터 방어하는 역할을 나누어진 동반자다..

> 테스트는 우리의 생각이 실현될 것임을 증명하고, 모니터링은 무엇이 실현되고 있는지 보여준다.

## 캡슐화

OOP의 근본 개념중 하나

핵심 개념은 객체의 상태를 외부에서 알 수 없게 감추는 것

플랫폼 엔지니어의 과제는 조직 내부에 `관문이 아닌 가드레일`을 구축하되 그로 인한 마찰은 최소화 하는 것이다.

### 서비스 메시

서비스 메시는 control plane 관리와 사이드카 프로세스를 한데 묶어 지칭하는 용어, 서비스 메시는 애플리케이션 외부에서 마이크로서비스 사이의 상호작용을 관리하는 인프라 계층이다.





## 찾아봐야 할 것

- sidecar - 기본 Application 외 필요한 추가 기능을 별도의 Application으로 구현하고 이를 동일한 프로세스 또는 컨테이너 내부에 배치
- control plane
- istio

